<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simple Ably Chat</title>
<script src="https://cdn.ably.com/lib/ably.min-1.js"></script>
</head>
<body>

<h2>Simple Chat</h2>
<div id="chat" style="border:1px solid #000; padding:10px; width:300px; height:300px; overflow:auto;"></div>
<input type="text" id="msgInput" placeholder="Type message..." style="width:240px;">
<button id="sendBtn">Send</button>

<script>
const ABLY_API_KEY = 'KFH2jQ.6gDraw:-edY27j1_UfE8-TrnsJDxCn27Mv4hrB01X1MCgshXHg'; // <-- Yaha apna real Ably key dal do
let username = prompt("Enter your name") || "Anon";

const ably = new Ably.Realtime({ key: ABLY_API_KEY, clientId: username });
const channel = ably.channels.get('simple-chat');

// Subscribe to messages
channel.subscribe('message', (msg) => {
    const chatDiv = document.getElementById('chat');
    const sender = msg.clientId || 'Anon';
    chatDiv.innerHTML += `<b>${sender}:</b> ${msg.data}<br>`;
    chatDiv.scrollTop = chatDiv.scrollHeight;
});

// Send messages
document.getElementById('sendBtn').onclick = () => {
    const input = document.getElementById('msgInput');
    if(input.value.trim() === '') return;
    channel.publish('message', input.value.trim());
    input.value = '';
};

// Enter key support
document.getElementById('msgInput').addEventListener('keypress', (e) => {
    if(e.key === 'Enter') document.getElementById('sendBtn').click();
});
</script>

</body>
</html>
